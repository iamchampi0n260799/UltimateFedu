{"version":3,"sources":["containers/Home/SignInPage/module/action.js","containers/Home/SignInPage/Signin.js"],"names":["actFetchSignInRequest","type","SIGNIN_REQUEST","actFetchSignInSuccess","data","SIGNIN_SUCCESS","payload","actFetchSignInFailed","error","SIGNIN_FAILED","connect","state","loading","signinReducer","dispatch","Signin","history","user","axios","url","method","then","result","localStorage","setItem","JSON","stringify","maLoaiNguoiDung","push","catch","response","status","console","log","alert","fetchSignIn","props","useForm","register","handleSubmit","errors","className","style","width","height","src","alt","action","onSubmit","htmlFor","name","id","placeholder","ref","required","taiKhoan","message","matKhau","to"],"mappings":"wMA6CMA,EAAwB,WAC1B,MAAO,CACHC,KAAMC,MAGRC,EAAwB,SAACC,GAC3B,MAAO,CACHH,KAAMI,IACNC,QAASF,IAGXG,EAAuB,SAACC,GAC1B,MAAO,CACHP,KAAMQ,IACNH,QAASE,I,kCC2BFE,uBAfS,SAACC,GACvB,MAAO,CACLC,QAASD,EAAME,cAAcD,QAC7BR,KAAMO,EAAME,cAAcT,KAC1BI,MAAOG,EAAME,cAAcL,UAGJ,SAACM,GAC1B,MAAO,CACLC,OAAQ,SAACX,EAAMY,GACbF,ED7EqB,SAACG,EAAMD,GAC9B,OAAO,SAACF,GACJA,EAASd,KACTkB,IAAM,CACFC,IAAK,sEACLC,OAAQ,OACRhB,KAAMa,IACPI,MAAK,SAACC,GACLR,EAASX,EAAsBmB,EAAOlB,OACtCmB,aAAaC,QAAQ,OAAQC,KAAKC,UAAUJ,EAAOlB,OAEf,OAAhCkB,EAAOlB,KAAKuB,gBAMZX,EAAQY,KAAK,gBAEbZ,EAAQY,KAAK,YAGlBC,OAAM,SAACrB,GACN,OAAQA,EAAMsB,SAASC,QACnB,KAAK,IAIL,KAAK,IAEDC,QAAQC,IAAIzB,EAAMsB,SAAS1B,MAC3B8B,MAAM1B,EAAMsB,SAASC,OAAS,KAAOvB,EAAMsB,SAAS1B,MAK5DU,EAASP,EAAqBC,QCyC3B2B,CAAY/B,EAAMY,QAKlBN,EA/Ef,SAAgB0B,GAAQ,IAAD,EACsBC,cAAnCC,EADa,EACbA,SAAUC,EADG,EACHA,aAAcC,EADX,EACWA,OAKhC,OACE,6BAASC,UAAU,UACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,gBACb,yBAAKC,MAAO,CAAEC,MAAO,OAAQC,OAAQ,QAAUC,IAAI,2BAA2BC,IAAI,MAEpF,yBAAKL,UAAU,eACb,qCACA,0BAAMM,OAAO,GAAGC,SAAUT,GAbnB,SAACnC,GAChB4B,QAAQC,IAAI7B,GACZgC,EAAMrB,OAAOX,EAAMgC,EAAMpB,aAYf,yBAAKyB,UAAU,cACb,2BAAOQ,QAAQ,YACb,uBAAGR,UAAU,oBAEf,2BACExC,KAAK,WACLiD,KAAK,WACLC,GAAG,GACHC,YAAY,oBACZC,IAAKf,EAAS,CACZgB,SAAU,gBAGbd,EAAOe,UACN,0BAAMd,UAAU,eAAeD,EAAOe,SAASC,UAGnD,yBAAKf,UAAU,cACb,2BAAOQ,QAAQ,WACb,uBAAGR,UAAU,eAEf,2BACExC,KAAK,WACLiD,KAAK,UACLC,GAAG,GACHC,YAAY,qBACZC,IAAKf,EAAS,CACZgB,SAAU,gBAGbd,EAAOiB,SACN,0BAAMhB,UAAU,eAAeD,EAAOiB,QAAQD,UAGlD,4BAAQf,UAAU,mBAAlB,4BACA,yBAAKA,UAAU,cACb,8EAC0B,kBAAC,IAAD,CAAMiB,GAAG,WAAT","file":"static/js/6.6e6d89c9.chunk.js","sourcesContent":["import { SIGNIN_REQUEST, SIGNIN_SUCCESS, SIGNIN_FAILED } from './constant.js'\r\n\r\nimport axios from \"axios\"\r\n\r\nexport const fetchSignIn = (user, history) => {\r\n    return (dispatch) => {\r\n        dispatch(actFetchSignInRequest());\r\n        axios({\r\n            url: 'https://elearning0706.cybersoft.edu.vn/api/QuanLyNguoiDung/DangNhap',\r\n            method: \"POST\",\r\n            data: user\r\n        }).then((result) => {\r\n            dispatch(actFetchSignInSuccess(result.data))\r\n            localStorage.setItem(\"user\", JSON.stringify(result.data));\r\n\r\n            if (result.data.maLoaiNguoiDung === \"GV\") {\r\n                /**\r\n                 * taikhoan GV: caochihieu\r\n                 * matkhau: 123456\r\n                 * accessToken: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiY2FvY2hpaGlldSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkdWIiwibmJmIjoxNjA2MzEwOTAwLCJleHAiOjE2MDYzMTQ1MDB9.KG0abTELjZ3WzPfJ3rAFM1N1voBxpX6GgETCUf1AGnc\"\r\n                 */\r\n                history.push('/admin/users')\r\n            } else {\r\n                history.push('/user')\r\n            }\r\n\r\n        }).catch((error) => {\r\n            switch (error.response.status) {\r\n                case 500:\r\n                    console.log(error.response.data);\r\n                    alert(error.response.status + \": \" + error.response.data);\r\n                    break;\r\n                case 401:\r\n                    // xử lý logout,..\r\n                    console.log(error.response.data);\r\n                    alert(error.response.status + \": \" + error.response.data);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            dispatch(actFetchSignInFailed(error))\r\n        })\r\n    }\r\n}\r\n\r\nconst actFetchSignInRequest = () => {\r\n    return {\r\n        type: SIGNIN_REQUEST\r\n    }\r\n}\r\nconst actFetchSignInSuccess = (data) => {\r\n    return {\r\n        type: SIGNIN_SUCCESS,\r\n        payload: data\r\n    }\r\n}\r\nconst actFetchSignInFailed = (error) => {\r\n    return {\r\n        type: SIGNIN_FAILED,\r\n        payload: error\r\n    }\r\n}","import React from 'react'\r\nimport { fetchSignIn } from \"./module/action\";\r\nimport { connect } from \"react-redux\";\r\nimport { useForm } from 'react-hook-form';\r\nimport \"./index.css\"\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Signin(props) {\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const onSubmit = (data) => {\r\n    console.log(data);\r\n    props.Signin(data, props.history)\r\n  }\r\n  return (\r\n    <section className=\"signup\">\r\n      <div className=\"container\">\r\n        <div className=\"signup-content\">\r\n          <div className=\"signin-image\">\r\n            <img style={{ width: \"100%\", height: \"100%\" }} src=\"/images/signin-image.jpg\" alt=\"\" />\r\n          </div>\r\n          <div className=\"signup-form\">\r\n            <h1>Login</h1>\r\n            <form action=\"\" onSubmit={handleSubmit(onSubmit)}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"taiKhoan\">\r\n                  <i className=\"fa fa-asterisk\"></i>\r\n                </label>\r\n                <input\r\n                  type=\"taiKhoan\"\r\n                  name=\"taiKhoan\"\r\n                  id=\"\"\r\n                  placeholder=\"Tài khoản\"\r\n                  ref={register({\r\n                    required: \" Required\",\r\n                  })}\r\n                />\r\n                {errors.taiKhoan && (\r\n                  <span className=\"text-danger\">{errors.taiKhoan.message}</span>\r\n                )}\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"matKhau\">\r\n                  <i className=\"fa fa-key\"></i>\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"matKhau\"\r\n                  id=\"\"\r\n                  placeholder=\"Mật khẩu\"\r\n                  ref={register({\r\n                    required: \" Required\",\r\n                  })}\r\n                />\r\n                {errors.matKhau && (\r\n                  <span className=\"text-danger\">{errors.matKhau.message}</span>\r\n                )}\r\n              </div>\r\n              <button className=\"btn btn-primary\">Đăng nhập</button>\r\n              <div className=\"form-group\">\r\n                <span>\r\n                  Bạn chưa có tài khoản ? <Link to=\"/signup\">Đăng ký</Link>\r\n                </span>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    loading: state.signinReducer.loading,\r\n    data: state.signinReducer.data,\r\n    error: state.signinReducer.error,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    Signin: (data, history) => {\r\n      dispatch(fetchSignIn(data, history));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);\r\n"],"sourceRoot":""}