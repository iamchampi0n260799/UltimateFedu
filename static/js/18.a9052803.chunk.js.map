{"version":3,"sources":["containers/Admin/Courses/index.js"],"names":["Courses","props","useState","danhMucKhoaHoc","setDanhMucKhoaHoc","danhSachNguoiDung","setDanhSachNguoiDung","taiKhoanNguoiTao","setTaiKhoanNguoiTao","maDanhMucKhoaHoc","setMaDanhMucKhoaHoc","useForm","register","handleSubmit","errors","getValues","useEffect","Promise","all","axios","then","result","filterNguoiDung","data","filter","user","maLoaiNguoiDung","catch","error","console","log","className","action","onSubmit","courses","maNhom","luotXem","danhgia","accessToken","localStorage","getItem","JSON","parse","url","method","headers","Authorization","err","htmlFor","ref","required","type","name","id","placeholder","maKhoaHoc","message","tenKhoaHoc","moTa","onChange","preview","document","querySelector","file","files","reader","FileReader","onloadend","src","readAsDataURL","width","height","alt","event","target","value","map","item","index","tenDanhMuc","key","renderCategoies","hoTen","renderDanhSachGV"],"mappings":"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","file":"static/js/18.a9052803.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport \"./index.css\";\r\nimport axios from \"axios\";\r\nexport default function Courses(props) {\r\n  const [danhMucKhoaHoc, setDanhMucKhoaHoc] = useState([]);\r\n  const [danhSachNguoiDung, setDanhSachNguoiDung] = useState([]);\r\n  const [taiKhoanNguoiTao, setTaiKhoanNguoiTao] =\r\n    useState({}) || \"Cao Chi Hieu\";\r\n  const [maDanhMucKhoaHoc, setMaDanhMucKhoaHoc] =\r\n    useState({}) || \"Lập trình Backend\";\r\n  const { register, handleSubmit, errors, getValues } = useForm();\r\n  const onChangeNguoiTao = (event) => {\r\n    setTaiKhoanNguoiTao(event.target.value);\r\n  };\r\n  const onChangeDanhMuc = (event) => {\r\n    setMaDanhMucKhoaHoc(event.target.value);\r\n  };\r\n  const previewFile = () => {\r\n    var preview = document.querySelector(\"img\");\r\n    var file = document.querySelector(\"input[type=file]\").files[0];\r\n    var reader = new FileReader();\r\n\r\n    reader.onloadend = function () {\r\n      preview.src = reader.result;\r\n    };\r\n\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      preview.src = \"\";\r\n    }\r\n  };\r\n  const onSubmit = (data) => {\r\n    const courses = {\r\n      ...data,\r\n      maNhom: \"GP01\",\r\n      luotXem: 3151,\r\n      danhgia: 0,\r\n      taiKhoanNguoiTao,\r\n      maDanhMucKhoaHoc,\r\n    };\r\n    console.log(courses)\r\n    let accessToken = ''\r\n        if(localStorage.getItem('user')){\r\n            let getItemLocalStorage = JSON.parse(localStorage.getItem('user'))\r\n            accessToken = getItemLocalStorage.accessToken;\r\n        }\r\n      axios({\r\n      url: `http://elearning0706.cybersoft.edu.vn/api/QuanLyKhoaHoc/ThemKhoaHoc`,\r\n      method: \"POST\",\r\n      data: courses,\r\n      headers: {\r\n        'Access-Control-Allow-Origin' : 'http://elearning0706.cybersoft.edu.vn/api/QuanLyKhoaHoc/ThemKhoaHoc',\r\n        'Access-Control-Allow-Methods':'GET,PUT,POST,DELETE,PATCH,OPTIONS',\r\n        Authorization: `Bearer ${accessToken}`\r\n    },\r\n    }).then((result) => {\r\n      console.log('Success')\r\n      console.log(result.data)\r\n    }).catch(err => {\r\n      console.log(err)\r\n    })\r\n  };\r\n  const renderCategoies = () => {\r\n    if (danhMucKhoaHoc) {\r\n      return danhMucKhoaHoc.map((item, index) => (\r\n        <option value={item.tenDanhMuc} name={item.tenDanhMuc} key={index}>\r\n          {item.tenDanhMuc}\r\n        </option>\r\n      ));\r\n    }\r\n  };\r\n  const renderDanhSachGV = () => {\r\n    if (danhMucKhoaHoc) {\r\n      return danhSachNguoiDung.map((item, index) => (\r\n        <option value={item.hoTen} name={item.hoTen} key={index}>\r\n          {item.hoTen}\r\n        </option>\r\n      ));\r\n    }\r\n  };\r\n  function getDanhSachNguoiDung() {\r\n    return axios(\r\n      \"https://elearning0706.cybersoft.edu.vn/api/QuanLyNguoiDung/LayDanhSachNguoiDung?MaNhom=GP01\"\r\n    );\r\n  }\r\n  function getDanhMucKhoaHoc() {\r\n    return axios(\r\n      \"https://elearning0706.cybersoft.edu.vn/api/QuanLyKhoaHoc/LayDanhMucKhoaHoc\"\r\n    );\r\n  }\r\n  useEffect(() => {\r\n    Promise.all([getDanhSachNguoiDung(), getDanhMucKhoaHoc()])\r\n      .then((result) => {\r\n        let filterNguoiDung = result[0].data.filter(\r\n          (user) => user.maLoaiNguoiDung === \"GV\"\r\n        );\r\n        setDanhSachNguoiDung(filterNguoiDung);\r\n        setDanhMucKhoaHoc(result[1].data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <section className=\"signup\">\r\n        <div className=\"container\">\r\n          <div className=\"signup-content\">\r\n            <div className=\"signup-form\">\r\n              <h1>Thêm khóa học</h1>\r\n              <form action=\"\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"maKhoaHoc\"></label>\r\n                  <input\r\n                    ref={register({\r\n                      required: \" Required\",\r\n                    })}\r\n                    type=\"text\"\r\n                    name=\"maKhoaHoc\"\r\n                    id=\"maKhoaHoc\"\r\n                    placeholder=\"Mã khóa học\"\r\n                  />\r\n                  {errors.maKhoaHoc && (\r\n                    <span className=\"text-danger\">\r\n                      {errors.maKhoaHoc.message}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"tenKhoaHoc\"></label>\r\n                  <input\r\n                    ref={register({\r\n                      required: \" Required\",\r\n                    })}\r\n                    type=\"text\"\r\n                    name=\"tenKhoaHoc\"\r\n                    id=\"tenKhoaHoc\"\r\n                    placeholder=\"Tên khóa học\"\r\n                  />\r\n                  {errors.tenKhoaHoc && (\r\n                    <span className=\"text-danger\">\r\n                      {errors.tenKhoaHoc.message}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"moTa\"></label>\r\n                  <input\r\n                    ref={register({\r\n                      required: \" Required\",\r\n                    })}\r\n                    type=\"text\"\r\n                    name=\"moTa\"\r\n                    id=\"\"\r\n                    placeholder=\"Mô tả\"\r\n                  />\r\n                  {errors.moTa && (\r\n                    <span className=\"text-danger\">{errors.moTa.message}</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <label htmlFor=\"hinhAnh\"></label>\r\n                  <div>\r\n                    <input ref={register({\r\n                      required: \" Required\",\r\n                    })} \r\n                    name=\"hinhAnh\"\r\n                    type=\"file\" \r\n                    onChange={previewFile} />\r\n                    <br />\r\n                    <img src=\"\" width=\"100%\" height=\"100%\" alt=\"Image preview...\"></img>\r\n                  </div>\r\n\r\n                  \r\n                </div>\r\n                <p>Mã danh mục khóa học</p>\r\n                <div className=\"form-group\">\r\n                  <select\r\n                    onChange={onChangeDanhMuc}\r\n                    name=\"maDanhMucKhoaHoc\"\r\n                    className=\"p-3 select-option\"\r\n                  >\r\n                    {renderCategoies()}\r\n                  </select>\r\n                </div>\r\n                <p>Tài khoản người tạo</p>\r\n                <div className=\"form-group\">\r\n                  <select\r\n                    onChange={onChangeNguoiTao}\r\n                    name=\"taiKhoanNguoiTao\"\r\n                    id=\"\"\r\n                    className=\"p-3 select-option\"\r\n                  >\r\n                    {renderDanhSachGV()}\r\n                  </select>\r\n                </div>\r\n                <button className=\"btn btn-primary\">Thêm</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}